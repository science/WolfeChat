
> wolfechat@0.0.0 test:browser-live
> npx playwright test --project=live


Running 98 tests using 10 workers

  âœ“   5 [live] â€º tests-e2e/live/clear-new-chat-input.spec.ts:33:5 â€º Clear/New Chat Input Box Behavior â€º Clear Chat Button Tests â€º should clear input when clicking Clear Chat button in sidebar (2.4s)
  âœ“   3 [live] â€º tests-e2e/live/browser-live-smoke.spec.ts:7:3 â€º live API basics â€º can type text into input field (2.5s)
  âœ“   1 [live] â€º tests-e2e/live/model-selection-payload.spec.ts:19:3 â€º Model selection drives request payload.model â€º gpt-3.5-turbo then gpt-5-nano reflected in payload.model (3.7s)
  âœ“  10 [live] â€º tests-e2e/live/new-chat-preserves-input.spec.ts:107:5 â€º New Chat Button Input Preservation Bug Tests â€º Basic New Chat Functionality â€º TEST 1: Basic New Chat Button Preserves Input  (3.9s)
  âœ“  11 [live] â€º tests-e2e/live/clear-new-chat-input.spec.ts:49:5 â€º Clear/New Chat Input Box Behavior â€º Clear Chat Button Tests â€º should clear input when clicking Clear Chat button in QuickSettings (1.7s)
  âœ“   9 [live] â€º tests-e2e/live/anthropic-sdk-nonstreaming.spec.ts:29:3 â€º Anthropic SDK Non-Streaming â€º should send non-streaming message via SDK with claude-3-haiku (4.1s)
  âœ“  12 [live] â€º tests-e2e/live/browser-live-smoke.spec.ts:28:3 â€º live API basics â€º can set API key and send a prompt (3.2s)
  âœ“  14 [live] â€º tests-e2e/live/new-chat-preserves-input.spec.ts:149:5 â€º New Chat Button Input Preservation Bug Tests â€º Basic New Chat Functionality â€º TEST 2: Multiple Conversations Input Preservation  (1.8s)
  âœ“  15 [live] â€º tests-e2e/live/clear-new-chat-input.spec.ts:72:5 â€º Clear/New Chat Input Box Behavior â€º Clear Chat Button Tests â€º should clear input with partially typed message (1.9s)
  âœ“   4 [live] â€º tests-e2e/live/api-error-preserves-conversation.spec.ts:12:3 â€º API Error Handling â€º Invalid API key preserves conversation history (6.8s)
  âœ“   6 [live] â€º tests-e2e/live/anthropic-system-prompt.spec.ts:29:3 â€º Anthropic System Prompt Integration â€º should include default system prompt in Anthropic API request (6.9s)
  âœ“  13 [live] â€º tests-e2e/live/openai-system-prompt.spec.ts:21:3 â€º OpenAI System Prompt Integration â€º should include default system prompt in OpenAI API request (3.2s)
  âœ“  17 [live] â€º tests-e2e/live/provider-api-validation.spec.ts:18:3 â€º Provider API Validation â€º validates OpenAI API key successfully (1.4s)
  âœ“  16 [live] â€º tests-e2e/live/anthropic-sdk-nonstreaming.spec.ts:79:3 â€º Anthropic SDK Non-Streaming â€º should handle errors gracefully with invalid model via SDK (3.4s)
  âœ“  19 [live] â€º tests-e2e/live/clear-new-chat-input.spec.ts:87:5 â€º Clear/New Chat Input Box Behavior â€º Clear Chat Button Tests â€º should clear input with multi-line text (1.7s)
  âœ“  18 [live] â€º tests-e2e/live/new-chat-preserves-input.spec.ts:196:5 â€º New Chat Button Input Preservation Bug Tests â€º New Chat vs Clear Chat Behavior â€º TEST 3: New Chat vs Clear Chat Behavior Difference  (2.1s)
  âœ“  23 [live] â€º tests-e2e/live/provider-api-validation.spec.ts:53:3 â€º Provider API Validation â€º shows error for invalid OpenAI API key (839ms)
  âœ“  25 [live] â€º tests-e2e/live/clear-new-chat-input.spec.ts:104:5 â€º Clear/New Chat Input Box Behavior â€º New Chat Button Tests â€º should clear input when clicking New Chat button in sidebar (1.7s)
  âœ“  27 [live] â€º tests-e2e/live/provider-api-validation.spec.ts:77:51 â€º Provider API Validation â€º validates Anthropic API key successfully (2.5s)
  âœ“  24 [live] â€º tests-e2e/live/provider-model-management.spec.ts:34:3 â€º Provider Model Management - User Behavior â€º user can access models when single provider is configured (3.4s)
  âœ“  28 [live] â€º tests-e2e/live/clear-new-chat-input.spec.ts:120:5 â€º Clear/New Chat Input Box Behavior â€º New Chat Button Tests â€º should clear input when clicking New Chat button in mobile topbar (1.6s)
  âœ“  29 [live] â€º tests-e2e/live/provider-api-validation.spec.ts:127:51 â€º Provider API Validation â€º shows error for invalid Anthropic API key (758ms)
  âœ“  32 [live] â€º tests-e2e/live/provider-api-validation.spec.ts:151:3 â€º Provider API Validation â€º check API button is present and clickable for both providers (440ms)
  âœ“  26 [live] â€º tests-e2e/live/new-chat-preserves-input.spec.ts:242:5 â€º New Chat Button Input Preservation Bug Tests â€º Draft System Integration â€º TEST 4: Draft Persistence Through New Chat  (3.8s)
  âœ“  22 [live] â€º tests-e2e/live/openai-system-prompt.spec.ts:82:3 â€º OpenAI System Prompt Integration â€º should include custom conversation system prompt in OpenAI API request (5.5s)
  âœ“  33 [live] â€º tests-e2e/live/provider-api-validation.spec.ts:168:3 â€º Provider API Validation â€º API validation maintains provider context (1.4s)
  âœ“  36 [live] â€º tests-e2e/live/provider-api-validation.spec.ts:228:3 â€º Provider API Validation â€º empty API key shows appropriate state (399ms)
  âœ“   2 [live] â€º tests-e2e/live/anthropic_two_messages_simple.spec.ts:20:3 â€º Anthropic Two Messages Test â€º Two Anthropic reasoning messages with adequate wait (14.0s)
  âœ“  31 [live] â€º tests-e2e/live/clear-new-chat-input.spec.ts:139:5 â€º Clear/New Chat Input Box Behavior â€º New Chat Button Tests â€º should clear input after conversation with messages (2.9s)
  âœ“  30 [live] â€º tests-e2e/live/provider-model-management.spec.ts:55:51 â€º Provider Model Management - User Behavior â€º user can access models from multiple providers (3.5s)
  âœ“  21 [live] â€º tests-e2e/live/anthropic-system-prompt.spec.ts:86:3 â€º Anthropic System Prompt Integration â€º should include custom conversation system prompt in Anthropic API request (8.0s)
  âœ“  34 [live] â€º tests-e2e/live/new-chat-preserves-input.spec.ts:303:5 â€º New Chat Button Input Preservation Bug Tests â€º Edge Cases â€º TEST 5: Rapid New Chat Clicking  (3.5s)
  âœ“  39 [live] â€º tests-e2e/live/clear-new-chat-input.spec.ts:166:5 â€º Clear/New Chat Input Box Behavior â€º Edge Cases â€º should clear input with special characters and emojis (1.6s)
  âœ“  43 [live] â€º tests-e2e/live/clear-new-chat-input.spec.ts:181:5 â€º Clear/New Chat Input Box Behavior â€º Edge Cases â€º should maintain input box state after rapid button clicks (2.2s)
  âœ“  37 [live] â€º tests-e2e/live/provider-api-validation.spec.ts:256:3 â€º Provider API Validation â€º API validation error messages are provider-specific (4.5s)
  âœ“  42 [live] â€º tests-e2e/live/new-chat-preserves-input.spec.ts:346:5 â€º New Chat Button Input Preservation Bug Tests â€º Edge Cases â€º TEST 6: Complex Text Preservation  (2.9s)
  âœ“  44 [live] â€º tests-e2e/live/provider-switching.spec.ts:18:3 â€º Provider Switching UI â€º provider dropdown has correct options and default selection (437ms)
  âœ“  47 [live] â€º tests-e2e/live/provider-switching.spec.ts:34:3 â€º Provider Switching UI â€º API key field label changes based on selected provider (406ms)
  âœ“  40 [live] â€º tests-e2e/live/provider-model-management.spec.ts:85:3 â€º Provider Model Management - User Behavior â€º user can select and use models for conversation (4.3s)
  âœ“  48 [live] â€º tests-e2e/live/provider-switching.spec.ts:53:3 â€º Provider Switching UI â€º API key field maintains separate values for each provider (612ms)
  âœ“  35 [live] â€º tests-e2e/live/openai-system-prompt.spec.ts:140:3 â€º OpenAI System Prompt Integration â€º should send system prompt with reasoning models (GPT-5 nano) (6.9s)
  âœ“  50 [live] â€º tests-e2e/live/provider-switching.spec.ts:84:3 â€º Provider Switching UI â€º provider settings persist across page reloads (652ms)
  âœ“  38 [live] â€º tests-e2e/live/provider-quick-settings.spec.ts:33:3 â€º Provider Quick Settings Integration â€º Quick Settings shows models with provider indicators when both providers configured (6.5s)
  âœ“  52 [live] â€º tests-e2e/live/provider-switching.spec.ts:117:3 â€º Provider Switching UI â€º visual grouping container exists around provider settings (451ms)
  âœ“  54 [live] â€º tests-e2e/live/provider-switching.spec.ts:137:3 â€º Provider Switching UI â€º mode selection dropdown is not visible (413ms)
  âœ“  46 [live] â€º tests-e2e/live/new-chat-preserves-input.spec.ts:385:5 â€º New Chat Button Input Preservation Bug Tests â€º Cross-Platform New Chat Buttons â€º TEST 7: Topbar New Chat Button  (3.0s)
  âœ“  41 [live] â€º tests-e2e/live/anthropic-system-prompt.spec.ts:139:3 â€º Anthropic System Prompt Integration â€º should send system prompt with reasoning models (Claude Sonnet 4) (6.4s)
  âœ“  55 [live] â€º tests-e2e/live/provider-switching.spec.ts:149:3 â€º Provider Switching UI â€º provider switching preserves other settings (485ms)
  âœ“  56 [live] â€º tests-e2e/live/quick-settings-recent-models.spec.ts:8:3 â€º Live: Quick Settings model dropdown recent models functionality â€º initial state has no recent models, all models in main list (2.0s)
  âœ“  51 [live] â€º tests-e2e/live/quick-settings-per-conversation-live.spec.ts:7:1 â€º Live: per-conversation Quick Settings persist across switches (4.0s)
  âœ“  49 [live] â€º tests-e2e/live/provider-model-management.spec.ts:109:51 â€º Provider Model Management - User Behavior â€º user can switch between providers dynamically (6.7s)
  âœ“  20 [live] â€º tests-e2e/live/api-error-preserves-conversation.spec.ts:117:3 â€º API Error Handling â€º Network error during streaming preserves conversation (19.8s)
  âœ“  61 [live] â€º tests-e2e/live/provider-model-management.spec.ts:156:3 â€º Provider Model Management - User Behavior â€º user sees appropriate feedback when no providers configured (1.4s)
  âœ“   7 [live] â€º tests-e2e/live/anthropic-reasoning-auto-close.spec.ts:28:3 â€º Anthropic Reasoning Auto-Close â€º should auto-close reasoning window when assistant message starts (27.4s)
  âœ“  53 [live] â€º tests-e2e/live/provider-quick-settings.spec.ts:84:3 â€º Provider Quick Settings Integration â€º can switch models between providers in Quick Settings (7.4s)
  âœ“  59 [live] â€º tests-e2e/live/quick-settings-recent-models.spec.ts:70:3 â€º Live: Quick Settings model dropdown recent models functionality â€º sending message with selected model adds it to recent models section (5.0s)
  âœ“  63 [live] â€º tests-e2e/live/provider-model-management.spec.ts:178:3 â€º Provider Model Management - User Behavior â€º user experience remains consistent when provider keys are invalid (4.0s)
  âœ“   8 [live] â€º tests-e2e/live/delete-all-below.spec.ts:90:3 â€º Delete All Below - live UAT â€º deletes messages below pivot and remains usable (31.2s)
  âœ“  62 [live] â€º tests-e2e/live/reasoning-windows-placement.spec.ts:54:3 â€º Reasoning Windows Placement â€º RW appear with reasoning content and bind to correct message (6.1s)
  âœ“  65 [live] â€º tests-e2e/live/provider-quick-settings.spec.ts:121:3 â€º Provider Quick Settings Integration â€º recent models include both providers when both are used (7.3s)
  âœ“  58 [live] â€º tests-e2e/live/reasoning-sse-events-simple.spec.ts:10:3 â€º Simple SSE Event Capture for gpt-5-nano â€º Capture exact SSE events for gpt-5-nano reasoning model (14.5s)
  âœ“  66 [live] â€º tests-e2e/live/quick-settings-recent-models.spec.ts:209:3 â€º Live: Quick Settings model dropdown recent models functionality â€º switching models and sending messages builds recent models list (8.2s)
  âœ“  71 [live] â€º tests-e2e/live/responses-nonstream.spec.ts:10:3 â€º Live API: Responses API non-streaming â€º returns text via non-streaming Responses API (3.0s)
  âœ“  70 [live] â€º tests-e2e/live/provider-quick-settings.spec.ts:163:3 â€º Provider Quick Settings Integration â€º Quick Settings model selection persists per conversation (4.0s)
  âœ“  72 [live] â€º tests-e2e/live/responses-streaming.spec.ts:10:3 â€º Live API: Responses API streaming â€º streams tokens via streaming Responses API (3.2s)
  âœ“  67 [live] â€º tests-e2e/live/provider-model-management.spec.ts:210:51 â€º Provider Model Management - User Behavior â€º user can switch between different model types (10.6s)
  âœ“  73 [live] â€º tests-e2e/live/sse-events-live.spec.ts:128:1 â€º Live SSE: output completion and stream done (response.completed or [DONE]) (2.6s)
Reasoning panels before deletion: 1
Store before deletion: {
  "panelCount": 5,
  "windowCount": 1,
  "windows": [
    {
      "id": "1759518678012-v4ppcil50ko-win-conv-1759518672129-1k8vviank",
      "convId": "conv-1759518672129-1k8vviank",
      "anchorIndex": 0
    }
  ]
}
Messages before deletion: 2
Deleting all messages below index 0 (the user message that triggered reasoning)...
Messages after deletion: 1
Store AFTER deletion: {
  "panelCount": 0,
  "windowCount": 0,
  "windows": [],
  "panels": []
}
Reasoning panels visible in UI after deletion: 0
Panels in store after deletion: 0
Windows in store after deletion: 0
  âœ“  57 [live] â€º tests-e2e/live/reasoning-panels-delete-bug.spec.ts:79:3 â€º Issue #12: Reasoning panels should be deleted with messages â€º reasoning panels should be removed when delete-all-below is clicked (20.9s)
  âœ“  68 [live] â€º tests-e2e/live/reasoning-windows.spec.ts:42:2 â€º Reasoning (live): window renders and panel reaches done (11.0s)
  âœ“  74 [live] â€º tests-e2e/live/provider-quick-settings.spec.ts:209:3 â€º Provider Quick Settings Integration â€º Quick Settings reflects global model selection changes (3.2s)
  âœ“  75 [live] â€º tests-e2e/live/stop-button.spec.ts:24:3 â€º Stop Button Functionality â€º OpenAI: Stop button should appear during streaming (3.1s)
  âœ“  76 [live] â€º tests-e2e/live/provider-model-management.spec.ts:251:3 â€º Provider Model Management - User Behavior â€º user model selection persists across UI operations (3.0s)
  âœ“  77 [live] â€º tests-e2e/live/sse-events-live.spec.ts:150:1 â€º Live SSE: output completion for a very short answer (3.3s)
  âœ“  80 [live] â€º tests-e2e/live/provider-quick-settings.spec.ts:234:3 â€º Provider Quick Settings Integration â€º provider switching in Settings updates Quick Settings model list (3.7s)
  âœ“  83 [live] â€º tests-e2e/live/sse-events-live.spec.ts:165:1 â€º Live SSE: hook-based waits for reasoning and completion (2.5s)
  âœ“  81 [live] â€º tests-e2e/live/stop-button.spec.ts:76:3 â€º Stop Button Functionality â€º OpenAI: Stop button should abort stream when clicked (5.9s)
  âœ“  60 [live] â€º tests-e2e/live/reasoning-window-conversation-id-bug-tdd.spec.ts:8:3 â€º TDD: Reasoning Window Conversation ID Bug â€º reasoning window appears but shows "0 messages" due to conversation ID race condition (26.5s)
  âœ“  84 [live] â€º tests-e2e/live/title-update.spec.ts:10:3 â€º Live API: Title Update â€º conversation title updates after first message (4.5s)
  âœ“  82 [live] â€º tests-e2e/live/title-generation-async-timing.spec.ts:10:3 â€º Live API: Title Generation Async Timing â€º title generation should not block main message response (6.6s)
  âœ“  85 [live] â€º tests-e2e/live/stop-button.spec.ts:187:3 â€º Stop Button Functionality â€º Anthropic: Stop button should appear during streaming (2.6s)
  âœ“  78 [live] â€º tests-e2e/live/test-dropdown-helper.spec.ts:24:3 â€º Model Dropdown Helper Tests â€º helper correctly identifies empty dropdown state (11.8s)
  âœ“  87 [live] â€º tests-e2e/live/test-dropdown-helper.spec.ts:35:3 â€º Model Dropdown Helper Tests â€º helper detects single provider models (3.5s)
  âœ“  88 [live] â€º tests-e2e/live/test-dropdown-helper.spec.ts:52:3 â€º Model Dropdown Helper Tests â€º helper detects multiple providers with optgroups (4.5s)
  âœ“  89 [live] â€º tests-e2e/live/test-dropdown-helper.spec.ts:81:3 â€º Model Dropdown Helper Tests â€º helper correctly identifies selected model and provider (3.8s)
  âœ“  90 [live] â€º tests-e2e/live/test-dropdown-helper.spec.ts:95:3 â€º Model Dropdown Helper Tests â€º helper works with Settings dropdown (4.6s)
  âœ“  45 [live] â€º tests-e2e/live/quick-settings-conversation-state-bug.spec.ts:14:3 â€º Live API: Quick Settings per-conversation settings honored on submit â€º Live: settings persist and are honored when submitting (53.8s)
  âœ“  91 [live] â€º tests-e2e/live/test-dropdown-helper.spec.ts:119:3 â€º Model Dropdown Helper Tests â€º checkApiKeysFromState utility works correctly (5.6s)
  âœ“  64 [live] â€º tests-e2e/live/anthropic-reasoning-auto-close.spec.ts:73:3 â€º Anthropic Reasoning Auto-Close â€º should auto-close for multiple consecutive Anthropic messages (49.0s)
  âœ“  69 [live] â€º tests-e2e/live/reasoning-windows-placement.spec.ts:97:3 â€º Reasoning Windows Placement â€º RW placement remains stable when new messages are added (46.0s)
  âœ“  92 [live] â€º tests-e2e/live/test-dropdown-helper.spec.ts:141:3 â€º Model Dropdown Helper Tests â€º helper handles captureHtml option for debugging (3.5s)
  âœ“  79 [live] â€º tests-e2e/live/reasoning-windows.spec.ts:75:2 â€º Reasoning (live): auto-minimizes after assistant starts replying (38.1s)
  âœ“  94 [live] â€º tests-e2e/live/test-dropdown-helper.spec.ts:157:3 â€º Model Dropdown Helper Tests â€º helper detectProvider function works correctly (3.5s)
  âœ“  96 [live] â€º tests-e2e/live/test-dropdown-helper.spec.ts:187:3 â€º Model Dropdown Helper Tests â€º helper closeAfter option works correctly (4.9s)
  âœ“  95 [live] â€º tests-e2e/live/reasoning-windows.spec.ts:126:2 â€º Reasoning (live): longer prompt streams content and reaches done (7.9s)
  âœ“  97 [live] â€º tests-e2e/live/test-dropdown-helper.spec.ts:215:3 â€º Model Dropdown Helper Tests â€º helper handles allModels flat array correctly (5.7s)
  âœ“  86 [live] â€º tests-e2e/live/reasoning-window-conversation-id-bug-tdd.spec.ts:90:3 â€º TDD: Reasoning Window Conversation ID Bug â€º reasoning window shows content when created quickly (not empty due to race condition) (44.0s)
  âœ“  93 [live] â€º tests-e2e/live/reasoning-windows-placement.spec.ts:168:3 â€º Reasoning Windows Placement â€º Non-reasoning model shows no RW, reasoning model shows RW (45.7s)
  âœ“  98 [live] â€º tests-e2e/live/reasoning-windows.spec.ts:151:2 â€º Reasoning (live): consecutive messages reopen and minimize correctly (43.9s)

  98 passed (2.2m)

To open last HTML report run:
[36m[39m
[36m  npx playwright show-report[39m
[36m[39m
